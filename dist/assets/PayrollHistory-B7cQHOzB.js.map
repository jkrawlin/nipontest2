{"version":3,"file":"PayrollHistory-B7cQHOzB.js","sources":["../../src/pages/payroll/PayrollHistory.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { PayrollService } from '../../services/api/payroll';\r\nimport type { PayrollBatch } from '../../types/payroll';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport const PayrollHistoryPage: React.FC = () => {\r\n\tconst [batches, setBatches] = useState<PayrollBatch[]>([]);\r\n\tconst navigate = useNavigate();\r\n\r\n\tuseEffect(() => {\r\n\t\tsetBatches(PayrollService.list().sort((a,b) => (b.year - a.year) || (b.month - a.month)));\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className=\"p-6 space-y-6\">\r\n\t\t\t<div className=\"flex items-center justify-between\">\r\n\t\t\t\t<h1 className=\"text-xl font-semibold\">Payroll History</h1>\r\n\t\t\t\t<button onClick={()=> navigate('/payroll/process')} className=\"px-3 py-1.5 text-sm rounded bg-blue-600 text-white\">Start New Run</button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"overflow-x-auto border rounded bg-white\">\r\n\t\t\t\t<table className=\"min-w-full text-sm\">\r\n\t\t\t\t\t<thead className=\"bg-gray-50\">\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th className=\"px-3 py-2 text-left\">Period</th>\r\n\t\t\t\t\t\t\t<th className=\"px-3 py-2 text-left\">Status</th>\r\n\t\t\t\t\t\t\t<th className=\"px-3 py-2 text-right\">Employees</th>\r\n\t\t\t\t\t\t\t<th className=\"px-3 py-2 text-right\">Total Amount</th>\r\n\t\t\t\t\t\t\t<th className=\"px-3 py-2 text-left\">Created</th>\r\n\t\t\t\t\t\t\t<th className=\"px-3 py-2\"></th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{batches.map(b => (\r\n\t\t\t\t\t\t\t<tr key={b.id} className=\"border-b last:border-0\">\r\n\t\t\t\t\t\t\t\t<td className=\"px-3 py-2 font-medium\">{b.month}/{b.year}</td>\r\n\t\t\t\t\t\t\t\t<td className=\"px-3 py-2 capitalize\"><span className={`px-2 py-0.5 rounded text-xs bg-${b.status==='processed'?'green':'blue'}-100 text-${b.status==='processed'?'green':'blue'}-700`}>{b.status}</span></td>\r\n\t\t\t\t\t\t\t\t<td className=\"px-3 py-2 text-right\">{b.calculations?.length || 0}</td>\r\n\t\t\t\t\t\t\t\t<td className=\"px-3 py-2 text-right font-medium\">{b.totalAmount.toFixed(2)}</td>\r\n\t\t\t\t\t\t\t\t<td className=\"px-3 py-2 text-xs text-gray-500\">{/* created from id timestamp base36 part */}{(() => { try { return new Date(parseInt(b.id!.split('-').pop()!,36)).toLocaleDateString(); } catch { return '-'; } })()}</td>\r\n\t\t\t\t\t\t\t\t<td className=\"px-3 py-2 text-right\"><button className=\"text-blue-600 hover:underline text-xs\" onClick={()=> navigate(`/payroll/payslips?batch=${b.id}`)}>View Payslips</button></td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t{batches.length === 0 && (\r\n\t\t\t\t\t\t\t<tr><td colSpan={6} className=\"px-3 py-6 text-center text-gray-500 text-sm\">No payroll batches yet.</td></tr>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default PayrollHistoryPage;\r\n"],"names":["PayrollHistoryPage","batches","setBatches","useState","navigate","useNavigate","useEffect","PayrollService","a","b","jsxs","jsx","_a"],"mappings":"iMAKO,MAAMA,EAA+B,IAAM,CACjD,KAAM,CAACC,EAASC,CAAU,EAAIC,EAAAA,SAAyB,CAAA,CAAE,EACnDC,EAAWC,EAAA,EAEjBC,OAAAA,EAAAA,UAAU,IAAM,CACfJ,EAAWK,EAAe,KAAA,EAAO,KAAK,CAACC,EAAEC,IAAOA,EAAE,KAAOD,EAAE,MAAUC,EAAE,MAAQD,EAAE,KAAM,CAAC,CACzF,EAAG,CAAA,CAAE,EAGJE,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACd,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACd,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,wBAAwB,SAAA,kBAAe,EACrDA,EAAAA,IAAC,UAAO,QAAS,IAAKP,EAAS,kBAAkB,EAAG,UAAU,qDAAqD,SAAA,eAAA,CAAa,CAAA,EACjI,QACC,MAAA,CAAI,UAAU,0CACd,SAAAM,EAAAA,KAAC,QAAA,CAAM,UAAU,qBAChB,SAAA,CAAAC,MAAC,QAAA,CAAM,UAAU,aAChB,SAAAD,EAAAA,KAAC,KAAA,CACA,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sBAAsB,SAAA,SAAM,EAC1CA,EAAAA,IAAC,KAAA,CAAG,UAAU,sBAAsB,SAAA,SAAM,EAC1CA,EAAAA,IAAC,KAAA,CAAG,UAAU,uBAAuB,SAAA,YAAS,EAC9CA,EAAAA,IAAC,KAAA,CAAG,UAAU,uBAAuB,SAAA,eAAY,EACjDA,EAAAA,IAAC,KAAA,CAAG,UAAU,sBAAsB,SAAA,UAAO,EAC3CA,EAAAA,IAAC,KAAA,CAAG,UAAU,WAAA,CAAY,CAAA,CAAA,CAC3B,CAAA,CACD,SACC,QAAA,CACC,SAAA,CAAAV,EAAQ,IAAIQ,GAAA,OACZC,OAAAA,EAAAA,KAAC,KAAA,CAAc,UAAU,yBACxB,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,wBAAyB,SAAA,CAAAD,EAAE,MAAM,IAAEA,EAAE,IAAA,EAAK,EACxDE,EAAAA,IAAC,MAAG,UAAU,uBAAuB,eAAC,OAAA,CAAK,UAAW,kCAAkCF,EAAE,SAAS,YAAY,QAAQ,MAAM,aAAaA,EAAE,SAAS,YAAY,QAAQ,MAAM,OAAS,SAAAA,EAAE,MAAA,CAAO,CAAA,CAAO,QACvM,KAAA,CAAG,UAAU,uBAAwB,WAAAG,EAAAH,EAAE,eAAF,YAAAG,EAAgB,SAAU,EAAE,EAClED,EAAAA,IAAC,MAAG,UAAU,mCAAoC,WAAE,YAAY,QAAQ,CAAC,EAAE,EAC3EA,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAiF,UAAA,IAAM,CAAE,GAAI,CAAE,OAAO,IAAI,KAAK,SAASF,EAAE,GAAI,MAAM,GAAG,EAAE,IAAA,EAAO,EAAE,CAAC,EAAE,mBAAA,CAAsB,MAAQ,CAAE,MAAO,GAAK,CAAE,IAAG,CAAE,QACrN,KAAA,CAAG,UAAU,uBAAuB,SAAAE,MAAC,UAAO,UAAU,wCAAwC,QAAS,IAAKP,EAAS,2BAA2BK,EAAE,EAAE,EAAE,EAAG,yBAAa,CAAA,CAAS,CAAA,GANxKA,EAAE,EAOX,EACA,EACAR,EAAQ,SAAW,GACnBU,EAAAA,IAAC,KAAA,CAAG,SAAAA,EAAAA,IAAC,KAAA,CAAG,QAAS,EAAG,UAAU,8CAA8C,SAAA,yBAAA,CAAuB,CAAA,CAAK,CAAA,CAAA,CAE1G,CAAA,CAAA,CACD,CAAA,CACD,CAAA,EACD,CAEF"}