import{j as e}from"./vendor-ds6wDdAD.js";import{r as n}from"./react-nPrKd0zk.js";import{C as h}from"./customers-qEHjyBNn.js";import{c as d,a as f,l as p,D as v,U as C,B as w}from"./index-sMHxiCIB.js";import{C as l,d as r}from"./card-DuYZQIZY.js";import{B as x}from"./badge-D-J4CWRb.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=d("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=d("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=d("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),B=()=>{const o=f(),[j,u]=n.useState([]),[t,N]=n.useState({}),[c,y]=n.useState("");n.useEffect(()=>{g()},[]);const g=()=>{const s=h.getAll();u(s),N({totalCustomers:s.length,activeCustomers:s.filter(a=>a.status==="Active").length,totalRevenue:s.reduce((a,i)=>a+i.financial.currentMonthRevenue,0),totalDeployed:s.reduce((a,i)=>a+i.deployment.totalActive,0),expiringContracts:h.getExpiringContracts(30).length})},m=j.filter(s=>s.companyInfo.name.toLowerCase().includes(c.toLowerCase())||s.customerCode.toLowerCase().includes(c.toLowerCase()));return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Customers"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage client companies and contracts"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(l,{className:"p-4",children:e.jsx(r,{className:"p-0",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-bold",children:t.totalCustomers||0})]}),e.jsx(p,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(l,{className:"p-4",children:e.jsx(r,{className:"p-0",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold",children:t.activeCustomers||0})]}),e.jsx(p,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(l,{className:"p-4",children:e.jsx(r,{className:"p-0",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Monthly Revenue"}),e.jsxs("p",{className:"text-xl font-bold",children:["QAR ",(t.totalRevenue||0).toFixed(0)]})]}),e.jsx(v,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(l,{className:"p-4",children:e.jsx(r,{className:"p-0",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Deployed Staff"}),e.jsx("p",{className:"text-2xl font-bold",children:t.totalDeployed||0})]}),e.jsx(C,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(l,{className:"p-4",children:e.jsx(r,{className:"p-0",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Expiring Soon"}),e.jsx("p",{className:"text-2xl font-bold",children:t.expiringContracts||0})]}),e.jsx(A,{className:"h-8 w-8 text-orange-600"})]})})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{value:c,onChange:s=>y(s.target.value),placeholder:"Search customers...",className:"pl-9 pr-3 py-2 border rounded-lg w-72 text-sm"})]}),e.jsxs(w,{onClick:()=>o("/customers/new"),children:[e.jsx(b,{className:"mr-2 h-4 w-4"}),"Add Customer"]})]}),e.jsx("div",{className:"overflow-x-auto border rounded",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-3 py-2",children:"Code"}),e.jsx("th",{className:"text-left px-3 py-2",children:"Company"}),e.jsx("th",{className:"text-left px-3 py-2",children:"Contract"}),e.jsx("th",{className:"text-left px-3 py-2",children:"Deployed"}),e.jsx("th",{className:"text-left px-3 py-2",children:"Monthly Revenue"}),e.jsx("th",{className:"text-left px-3 py-2",children:"Outstanding"}),e.jsx("th",{className:"text-left px-3 py-2",children:"Status"}),e.jsx("th",{className:"text-left px-3 py-2",children:"Rating"})]})}),e.jsxs("tbody",{children:[m.map(s=>e.jsxs("tr",{className:"border-t hover:bg-gray-50 cursor-pointer",onClick:()=>o(`/customers/${s.id}`),children:[e.jsx("td",{className:"px-3 py-2 font-medium",children:s.customerCode}),e.jsxs("td",{className:"px-3 py-2",children:[e.jsx("div",{className:"font-medium",children:s.companyInfo.name}),e.jsx("div",{className:"text-[11px] text-gray-500",children:s.companyInfo.industry})]}),e.jsxs("td",{className:"px-3 py-2 text-xs",children:[e.jsx("div",{children:s.contract.contractNumber}),s.contract.endDate&&e.jsxs("div",{className:"text-[10px] text-gray-500",children:["Expires ",new Date(s.contract.endDate).toLocaleDateString()]})]}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs(x,{variant:"outline",children:[s.deployment.totalActive," workers"]})}),e.jsxs("td",{className:"px-3 py-2 font-medium",children:["QAR ",s.financial.currentMonthRevenue.toLocaleString()]}),e.jsxs("td",{className:"px-3 py-2 font-medium {c.financial.outstandingAmount>0?'text-red-600':'text-green-600'}",children:["QAR ",s.financial.outstandingAmount.toLocaleString()]}),e.jsx("td",{className:"px-3 py-2",children:e.jsx(x,{variant:s.status==="Active"?"success":s.status==="Suspended"?"warning":s.status==="Inactive"?"secondary":"destructive",children:s.status})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx(x,{variant:s.rating==="Excellent"?"success":s.rating==="Good"?"info":s.rating==="Average"?"secondary":"destructive",children:s.rating})})]},s.id)),m.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-3 py-6 text-center text-xs text-gray-500",children:"No customers found."})})]})]})})]})};export{B as CustomerList,B as default};
//# sourceMappingURL=CustomerList-DpNct68y.js.map
