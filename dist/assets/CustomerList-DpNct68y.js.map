{"version":3,"file":"CustomerList-DpNct68y.js","sources":["../../node_modules/lucide-react/dist/esm/icons/plus.js","../../node_modules/lucide-react/dist/esm/icons/search.js","../../node_modules/lucide-react/dist/esm/icons/triangle-alert.js","../../src/pages/customers/CustomerList.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.441.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Plus = createLucideIcon(\"Plus\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n]);\n\nexport { Plus as default };\n//# sourceMappingURL=plus.js.map\n","/**\n * @license lucide-react v0.441.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Search = createLucideIcon(\"Search\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"path\", { d: \"m21 21-4.3-4.3\", key: \"1qie3q\" }]\n]);\n\nexport { Search as default };\n//# sourceMappingURL=search.js.map\n","/**\n * @license lucide-react v0.441.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst TriangleAlert = createLucideIcon(\"TriangleAlert\", [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3\",\n      key: \"wmoenq\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { TriangleAlert as default };\n//# sourceMappingURL=triangle-alert.js.map\n","import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { CustomerService } from '../../services/api/customers';\r\nimport type { Customer } from '../../types/customer';\r\nimport { Building2, Users, DollarSign, AlertTriangle, Plus, Search } from 'lucide-react';\r\nimport { Button } from '../../components/ui/button';\r\nimport { Card, CardContent } from '../../components/ui/card';\r\nimport { Badge } from '../../components/ui/badge';\r\n\r\nexport const CustomerList: React.FC = () => {\r\n  const navigate = useNavigate();\r\n  const [customers, setCustomers] = useState<Customer[]>([]);\r\n  const [stats, setStats] = useState<any>({});\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  useEffect(() => { load(); }, []);\r\n\r\n  const load = () => {\r\n    const data = CustomerService.getAll();\r\n    setCustomers(data);\r\n    setStats({\r\n      totalCustomers: data.length,\r\n      activeCustomers: data.filter(c => c.status === 'Active').length,\r\n      totalRevenue: data.reduce((s,c)=> s + c.financial.currentMonthRevenue, 0),\r\n      totalDeployed: data.reduce((s,c)=> s + c.deployment.totalActive, 0),\r\n      expiringContracts: CustomerService.getExpiringContracts(30).length\r\n    });\r\n  };\r\n\r\n  const filtered = customers.filter(c => c.companyInfo.name.toLowerCase().includes(searchTerm.toLowerCase()) || c.customerCode.toLowerCase().includes(searchTerm.toLowerCase()));\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <div className=\"space-y-1\">\r\n        <h1 className=\"text-2xl font-semibold\">Customers</h1>\r\n        <p className=\"text-sm text-gray-600\">Manage client companies and contracts</p>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\r\n        <Card className=\"p-4\"><CardContent className=\"p-0\"><div className=\"flex justify-between items-center\"><div><p className=\"text-xs text-gray-500\">Total Customers</p><p className=\"text-2xl font-bold\">{stats.totalCustomers||0}</p></div><Building2 className=\"h-8 w-8 text-blue-600\"/></div></CardContent></Card>\r\n        <Card className=\"p-4\"><CardContent className=\"p-0\"><div className=\"flex justify-between items-center\"><div><p className=\"text-xs text-gray-500\">Active</p><p className=\"text-2xl font-bold\">{stats.activeCustomers||0}</p></div><Building2 className=\"h-8 w-8 text-green-600\"/></div></CardContent></Card>\r\n        <Card className=\"p-4\"><CardContent className=\"p-0\"><div className=\"flex justify-between items-center\"><div><p className=\"text-xs text-gray-500\">Monthly Revenue</p><p className=\"text-xl font-bold\">QAR {(stats.totalRevenue||0).toFixed(0)}</p></div><DollarSign className=\"h-8 w-8 text-green-600\"/></div></CardContent></Card>\r\n        <Card className=\"p-4\"><CardContent className=\"p-0\"><div className=\"flex justify-between items-center\"><div><p className=\"text-xs text-gray-500\">Deployed Staff</p><p className=\"text-2xl font-bold\">{stats.totalDeployed||0}</p></div><Users className=\"h-8 w-8 text-purple-600\"/></div></CardContent></Card>\r\n        <Card className=\"p-4\"><CardContent className=\"p-0\"><div className=\"flex justify-between items-center\"><div><p className=\"text-xs text-gray-500\">Expiring Soon</p><p className=\"text-2xl font-bold\">{stats.expiringContracts||0}</p></div><AlertTriangle className=\"h-8 w-8 text-orange-600\"/></div></CardContent></Card>\r\n      </div>\r\n\r\n      <div className=\"flex justify-between items-center\">\r\n        <div className=\"relative\">\r\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n          <input value={searchTerm} onChange={e=> setSearchTerm(e.target.value)} placeholder=\"Search customers...\" className=\"pl-9 pr-3 py-2 border rounded-lg w-72 text-sm\" />\r\n        </div>\r\n        <Button onClick={()=> navigate('/customers/new')}><Plus className=\"mr-2 h-4 w-4\"/>Add Customer</Button>\r\n      </div>\r\n\r\n      <div className=\"overflow-x-auto border rounded\">\r\n        <table className=\"min-w-full text-sm\">\r\n          <thead className=\"bg-gray-50 text-xs uppercase text-gray-500\">\r\n            <tr>\r\n              <th className=\"text-left px-3 py-2\">Code</th>\r\n              <th className=\"text-left px-3 py-2\">Company</th>\r\n              <th className=\"text-left px-3 py-2\">Contract</th>\r\n              <th className=\"text-left px-3 py-2\">Deployed</th>\r\n              <th className=\"text-left px-3 py-2\">Monthly Revenue</th>\r\n              <th className=\"text-left px-3 py-2\">Outstanding</th>\r\n              <th className=\"text-left px-3 py-2\">Status</th>\r\n              <th className=\"text-left px-3 py-2\">Rating</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {filtered.map(c => (\r\n              <tr key={c.id} className=\"border-t hover:bg-gray-50 cursor-pointer\" onClick={()=> navigate(`/customers/${c.id}`)}>\r\n                <td className=\"px-3 py-2 font-medium\">{c.customerCode}</td>\r\n                <td className=\"px-3 py-2\"><div className=\"font-medium\">{c.companyInfo.name}</div><div className=\"text-[11px] text-gray-500\">{c.companyInfo.industry}</div></td>\r\n                <td className=\"px-3 py-2 text-xs\"><div>{c.contract.contractNumber}</div>{c.contract.endDate && <div className=\"text-[10px] text-gray-500\">Expires {new Date(c.contract.endDate).toLocaleDateString()}</div>}</td>\r\n                <td className=\"px-3 py-2\"><Badge variant=\"outline\">{c.deployment.totalActive} workers</Badge></td>\r\n                <td className=\"px-3 py-2 font-medium\">QAR {c.financial.currentMonthRevenue.toLocaleString()}</td>\r\n                <td className=\"px-3 py-2 font-medium {c.financial.outstandingAmount>0?'text-red-600':'text-green-600'}\">QAR {c.financial.outstandingAmount.toLocaleString()}</td>\r\n                <td className=\"px-3 py-2\"><Badge variant={c.status==='Active'?'success': c.status==='Suspended'?'warning': c.status==='Inactive'?'secondary':'destructive'}>{c.status}</Badge></td>\r\n                <td className=\"px-3 py-2\"><Badge variant={c.rating==='Excellent'?'success': c.rating==='Good'?'info': c.rating==='Average'?'secondary':'destructive'}>{c.rating}</Badge></td>\r\n              </tr>\r\n            ))}\r\n            {filtered.length===0 && (\r\n              <tr><td colSpan={8} className=\"px-3 py-6 text-center text-xs text-gray-500\">No customers found.</td></tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CustomerList;\r\n"],"names":["Plus","createLucideIcon","Search","TriangleAlert","CustomerList","navigate","useNavigate","customers","setCustomers","useState","stats","setStats","searchTerm","setSearchTerm","useEffect","load","data","CustomerService","c","s","filtered","jsxs","jsx","Card","CardContent","Building2","DollarSign","Users","AlertTriangle","e","Button","Badge"],"mappings":"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","x_google_ignoreList":[0,1,2]}