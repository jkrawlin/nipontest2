var l=Object.defineProperty;var c=(o,t,a)=>t in o?l(o,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[t]=a;var i=(o,t,a)=>c(o,typeof t!="symbol"?t+"":t,a);class m{static getAll(){try{const t=localStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t):(this.seedInitialData(),this.getAll())}catch{return[]}}static getById(t){return this.getAll().find(a=>a.id===t)}static create(t){const a=this.getAll(),e={...t,id:crypto.randomUUID(),customerCode:this.generateCustomerCode(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return a.push(e),this.save(a),e}static update(t,a){const e=this.getAll(),r=e.findIndex(n=>n.id===t);if(r!==-1)return e[r]={...e[r],...a,updatedAt:new Date().toISOString()},this.save(e),e[r]}static deployEmployee(t,a){const e=this.getById(t);e&&(e.deployment.currentEmployees.push(a),e.deployment.totalDeployed++,e.deployment.totalActive++,this.update(t,e))}static removeEmployee(t,a){const e=this.getById(t);if(!e)return;const r=e.deployment.currentEmployees.findIndex(n=>n.employeeId===a);r!==-1&&(e.deployment.currentEmployees[r].status="Completed",e.deployment.currentEmployees[r].endDate=new Date().toISOString(),e.deployment.totalActive--),this.update(t,e)}static calculateMonthlyRevenue(t){const a=this.getById(t);if(!a)return 0;let e=0;return a.deployment.currentEmployees.filter(r=>r.status==="Active").forEach(r=>{const n=a.rates.defaultRates.find(s=>s.position===r.position);n&&(n.rateType==="Monthly"?e+=n.normalRate:n.rateType==="Daily"?e+=n.normalRate*30:n.rateType==="Hourly"&&(e+=n.normalRate*8*22))}),e}static getTopCustomers(t=5){return this.getAll().sort((a,e)=>e.financial.totalRevenue-a.financial.totalRevenue).slice(0,t)}static getExpiringContracts(t=30){const a=new Date;return a.setDate(a.getDate()+t),this.getAll().filter(e=>e.contract.endDate&&new Date(e.contract.endDate)<=a&&new Date(e.contract.endDate)>=new Date)}static generateCustomerCode(){const t=new Date().getFullYear(),a=this.getAll().filter(e=>e.customerCode.startsWith(`CUS-${t}`)).length+1;return`CUS-${t}-${String(a).padStart(4,"0")}`}static save(t){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}static seedInitialData(){const a=[{companyInfo:{name:"Qatar Petroleum",nameArabic:"قطر للبترول",tradeLicenseNumber:"TL123456",registrationNumber:"CR123456",taxNumber:"TAX123456",industry:"Oil & Gas",type:"Government",website:"www.qp.com.qa"},contact:{address:"P.O. Box 3212, West Bay, Doha, Qatar",city:"Doha",country:"Qatar",phone:"+974 4444 1111",email:"contracts@qp.com.qa"},primaryContact:{name:"Abdullah Al-Thani",nameArabic:"عبدالله الثاني",position:"Procurement Manager",mobile:"+974 5555 1234",email:"abdullah.thani@qp.com.qa"},contract:{contractNumber:"QP-2024-MC-001",startDate:"2024-01-01",endDate:"2026-12-31",type:"Master Agreement",status:"Active",creditLimit:5e5,paymentTerms:"30 Days"},billing:{vatRegistered:!0,vatNumber:"VAT123456789",currency:"QAR",invoiceFrequency:"Monthly"},requirements:{manpowerTypes:["Engineers","Technicians","Safety Officers","Laborers"],locations:["Ras Laffan","Dukhan","Mesaieed"],minimumWorkers:50,maximumWorkers:200,safetyTrainingRequired:!0,medicalRequired:!0,transportProvided:!0,accommodationProvided:!1},rates:{defaultRates:[{position:"Engineer",rateType:"Daily",normalRate:350,overtimeRate:60,holidayRate:700},{position:"Technician",rateType:"Daily",normalRate:250,overtimeRate:45,holidayRate:500},{position:"Laborer",rateType:"Daily",normalRate:150,overtimeRate:25,holidayRate:300}]},deployment:{currentEmployees:[],totalDeployed:0,totalActive:0},financial:{totalRevenue:25e5,currentMonthRevenue:18e4,outstandingAmount:36e4,creditUsed:36e4,paymentHistory:[]},documents:{},status:"Active",rating:"Excellent"},{companyInfo:{name:"Ashghal Public Works Authority",nameArabic:"هيئة الأشغال العامة",tradeLicenseNumber:"TL789012",registrationNumber:"CR789012",industry:"Construction",type:"Government",website:"www.ashghal.gov.qa"},contact:{address:"P.O. Box 22188, Doha, Qatar",city:"Doha",country:"Qatar",phone:"+974 4444 2222",email:"procurement@ashghal.gov.qa"},primaryContact:{name:"Mohammed Al-Kuwari",position:"HR Manager",mobile:"+974 5555 5678",email:"mohammed.kuwari@ashghal.gov.qa"},contract:{contractNumber:"ASH-2024-001",startDate:"2024-03-01",endDate:"2025-02-28",type:"Annual",status:"Active",creditLimit:3e5,paymentTerms:"45 Days"},billing:{vatRegistered:!1,currency:"QAR",invoiceFrequency:"Monthly"},requirements:{manpowerTypes:["Civil Engineers","Surveyors","Drivers","Laborers"],locations:["Lusail","Pearl Qatar","Doha Metro Sites"],safetyTrainingRequired:!0,medicalRequired:!0,transportProvided:!1,accommodationProvided:!1},rates:{defaultRates:[{position:"Civil Engineer",rateType:"Monthly",normalRate:12e3,overtimeRate:70},{position:"Surveyor",rateType:"Monthly",normalRate:8e3,overtimeRate:50},{position:"Driver",rateType:"Daily",normalRate:180,overtimeRate:30}]},deployment:{currentEmployees:[],totalDeployed:0,totalActive:0},financial:{totalRevenue:18e5,currentMonthRevenue:12e4,outstandingAmount:24e4,creditUsed:24e4,paymentHistory:[]},documents:{},status:"Active",rating:"Good"}].map(e=>({...e,id:crypto.randomUUID(),customerCode:this.generateCustomerCode(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin@niponpayroll.qa",lastModifiedBy:"admin@niponpayroll.qa"}));this.save(a)}}i(m,"STORAGE_KEY","nipon_customers");export{m as C};
//# sourceMappingURL=customers-qEHjyBNn.js.map
