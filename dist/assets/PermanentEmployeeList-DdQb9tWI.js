import{j as e}from"./vendor-ds6wDdAD.js";import{r as l}from"./react-nPrKd0zk.js";import{g as y}from"./employees-DNNZe7Q5.js";import{C as n}from"./card-DuYZQIZY.js";import{B as x}from"./badge-D-J4CWRb.js";import{D as N}from"./dialog-BgdO2cAq.js";import{E as f}from"./EmployeeDetails-DI4P3ZIf.js";import{U as o,D as u}from"./index-sMHxiCIB.js";import{F as g}from"./file-warning-CXt4pixh.js";const L=()=>{const[i,d]=l.useState([]),[r,m]=l.useState({total:0,active:0,onLeave:0,totalSalary:0}),[p,c]=l.useState(!1),[a,h]=l.useState(null);return l.useEffect(()=>{(async()=>{const s=await y();d(s),m({total:s.length,active:s.filter(t=>t.status==="Active").length,onLeave:s.filter(t=>t.status==="On Leave").length,totalSalary:s.reduce((t,j)=>t+j.compensation.totalMonthlySalary,0)})})()},[]),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Permanent Employees"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Full-time staff with Qatar IDs & monthly payroll"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total"}),e.jsx("p",{className:"text-xl font-bold",children:r.total})]}),e.jsx(o,{className:"w-6 h-6 text-blue-600"})]})}),e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Active"}),e.jsx("p",{className:"text-xl font-bold",children:r.active})]}),e.jsx(o,{className:"w-6 h-6 text-green-600"})]})}),e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"On Leave"}),e.jsx("p",{className:"text-xl font-bold",children:r.onLeave})]}),e.jsx(g,{className:"w-6 h-6 text-amber-600"})]})}),e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Monthly Payroll"}),e.jsxs("p",{className:"text-xl font-bold",children:["QAR ",r.totalSalary.toFixed(0)]})]}),e.jsx(u,{className:"w-6 h-6 text-green-600"})]})})]}),e.jsx("div",{className:"overflow-x-auto border rounded bg-white",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Code"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Position"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Qatar ID"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"ID Expiry"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Salary"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),e.jsxs("tbody",{children:[i.map(s=>{const t=Math.floor((new Date(s.documents.qatarId.expiryDate).getTime()-Date.now())/864e5);return e.jsxs("tr",{className:"border-b last:border-0",children:[e.jsx("td",{className:"px-3 py-2",children:s.employeeCode}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsxs("button",{className:"text-indigo-600 hover:underline font-medium",onClick:()=>{h(s),c(!0)},children:[s.personalInfo.firstName," ",s.personalInfo.lastName]})}),e.jsx("td",{className:"px-3 py-2",children:s.employment.position}),e.jsx("td",{className:"px-3 py-2",children:s.documents.qatarId.number}),e.jsx("td",{className:"px-3 py-2",children:e.jsx(x,{variant:t<0?"destructive":t<30?"outline":"secondary",children:t<0?"EXPIRED":t+"d"})}),e.jsx("td",{className:"px-3 py-2 text-right",children:s.compensation.totalMonthlySalary.toFixed(0)}),e.jsx("td",{className:"px-3 py-2",children:e.jsx(x,{variant:s.status==="Active"?"secondary":"outline",children:s.status})})]},s.id)}),i.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-3 py-6 text-center text-gray-500",children:"No records."})})]})]})}),e.jsx(N,{open:p,onClose:()=>c(!1),title:a?`${a.personalInfo.firstName} ${a.personalInfo.lastName}`:"Employee Details",size:"lg",children:a&&e.jsx(f,{employee:a})})]})};export{L as PermanentEmployeeList,L as default};
//# sourceMappingURL=PermanentEmployeeList-DdQb9tWI.js.map
