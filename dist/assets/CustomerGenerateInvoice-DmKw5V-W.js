import{j as e}from"./vendor-ds6wDdAD.js";import{r as a}from"./react-nPrKd0zk.js";import{C as j}from"./customers-qEHjyBNn.js";import{I as N}from"./invoices-CLR50L-3.js";import{h as g,a as f,B as l}from"./index-sMHxiCIB.js";import{C as v}from"./card-DuYZQIZY.js";const D=()=>{const{id:r}=g(),d=f(),[i,o]=a.useState(null),[s,x]=a.useState(null),[n,m]=a.useState(new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().substring(0,10)),[c,h]=a.useState(new Date().toISOString().substring(0,10));if(a.useEffect(()=>{r&&o(j.getById(r)||null)},[r]),!i)return e.jsx("div",{className:"p-6 text-sm",children:"Loading..."});const p=()=>{const t=N.createDraft({customerId:i.id,periodStart:n,periodEnd:c});t&&x(t)};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Generate Invoice"}),e.jsx("p",{className:"text-sm text-gray-600",children:i.companyInfo.name})]}),e.jsx(l,{variant:"outline",onClick:()=>d(-1),children:"Back"})]}),e.jsxs(v,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] uppercase mb-1",children:"Period Start"}),e.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:n,onChange:t=>m(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] uppercase mb-1",children:"Period End"}),e.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:c,onChange:t=>h(t.target.value)})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(l,{onClick:p,children:"Draft Invoice"})})]}),s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("div",{children:"Invoice #"}),e.jsx("div",{className:"font-medium",children:s.invoiceNumber})]}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"Description"}),e.jsx("th",{className:"text-right py-2",children:"Qty"}),e.jsx("th",{className:"text-right py-2",children:"Rate"}),e.jsx("th",{className:"text-right py-2",children:"Amount"})]})}),e.jsx("tbody",{children:s.lines.map((t,u)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-1",children:t.description}),e.jsx("td",{className:"py-1 text-right",children:t.quantity}),e.jsx("td",{className:"py-1 text-right",children:t.unitRate.toFixed(2)}),e.jsx("td",{className:"py-1 text-right",children:t.amount.toFixed(2)})]},u))}),e.jsxs("tfoot",{children:[e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"text-right py-1",children:"Subtotal"}),e.jsx("td",{className:"py-1 text-right font-medium",children:s.subtotal.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"text-right py-1",children:"VAT"}),e.jsx("td",{className:"py-1 text-right font-medium",children:s.vatAmount.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"text-right py-1",children:"Total"}),e.jsx("td",{className:"py-1 text-right font-bold",children:s.total.toFixed(2)})]})]})]})]})]})]})};export{D as CustomerGenerateInvoice,D as default};
//# sourceMappingURL=CustomerGenerateInvoice-DmKw5V-W.js.map
