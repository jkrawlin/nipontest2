import{j as e}from"./vendor-ds6wDdAD.js";import{r as a}from"./react-nPrKd0zk.js";import{E as r}from"./employees-D2MDJNGt.js";import{D as h}from"./decimal-CNRKZ6of.js";import"./employees-DNNZe7Q5.js";import"./index-sMHxiCIB.js";const b=()=>{const[o,l]=a.useState([]),[d,x]=a.useState(!0),[c,n]=a.useState(!1);a.useEffect(()=>{(async()=>{const t=await r.getActiveEmployees();l(t),x(!1)})()},[]);const m=async()=>{n(!0),await r.recalcEndOfServiceAll();const t=await r.getActiveEmployees();l(t),n(!1)},i=o.filter(t=>t.employeeType==="Permanent"),p=i.reduce((t,s)=>t.plus(s.endOfService.gratuityAmount),new h(0));return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold",children:"End of Service (EOS) Summary"}),e.jsx("p",{className:"text-xs text-gray-500 max-w-xl",children:"Gratuity approximated per Qatar Labor Law Article 54: 3 weeks basic salary per year for first 5 years, 4 weeks thereafter. This is a simplified estimator and should be validated against current legislation."})]}),e.jsx("button",{onClick:m,disabled:c,className:"px-3 py-1.5 rounded text-xs bg-qatar-maroon text-white disabled:opacity-60",children:c?"Recalculating…":"Recalculate"})]}),d?e.jsx("div",{className:"text-sm text-gray-500",children:"Loading…"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm font-medium",children:["Total EOS Liability: ",e.jsx("span",{className:"text-qatar-maroon font-semibold",children:p.toFixed(2)})]}),e.jsx("div",{className:"overflow-x-auto border rounded bg-white",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Employee"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Years of Service"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Basic Salary"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Eligible Amount"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Last Calculation"})]})}),e.jsxs("tbody",{children:[i.map(t=>{var s;return e.jsxs("tr",{className:"border-b last:border-0",children:[e.jsxs("td",{className:"px-3 py-2 font-medium whitespace-nowrap",children:[t.personalInfo.firstName," ",t.personalInfo.lastName]}),e.jsx("td",{className:"px-3 py-2 text-right",children:(t.endOfService.serviceYears||0).toFixed(2)}),e.jsx("td",{className:"px-3 py-2 text-right",children:(s=t.compensation.basicSalary)!=null&&s.toFixed?t.compensation.basicSalary.toFixed(2):"0.00"}),e.jsx("td",{className:"px-3 py-2 text-right font-semibold",children:(t.endOfService.gratuityAmount||0).toFixed(2)}),e.jsx("td",{className:"px-3 py-2 text-left text-xs",children:"—"})]},t.id)}),i.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-3 py-6 text-center text-gray-500",children:"No permanent employees."})})]})]})})]})]})};export{b as EndOfServicePage,b as default};
//# sourceMappingURL=EndOfService-BKLY6-Pa.js.map
