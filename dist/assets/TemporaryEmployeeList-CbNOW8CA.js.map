{"version":3,"file":"TemporaryEmployeeList-CbNOW8CA.js","sources":["../../src/pages/employees/TemporaryEmployeeList.tsx"],"sourcesContent":["import React,{useEffect,useState} from 'react';\r\nimport { TemporaryEmployee } from '../../types/employee';\r\nimport { TemporaryEmployeeService } from '../../services/api/temporaryEmployees';\r\nimport { getAllTemporaryEmployeesFS } from '../../services/firestore/employees';\r\nconst USE_FS = import.meta.env.VITE_DATA_BACKEND === 'firestore';\r\nimport { Card } from '../../components/ui/card';\r\nimport { Badge } from '../../components/ui/badge';\r\nimport { Users, FileWarning } from 'lucide-react';\r\nimport { Dialog } from '../../components/ui/dialog';\r\nimport { EmployeeDetails } from '../../components/features/employees/EmployeeDetails';\r\nimport type { Employee } from '../../types/employee';\r\n\r\nexport const TemporaryEmployeeList: React.FC = () => {\r\n  const [employees,setEmployees]=useState<TemporaryEmployee[]>([]);\r\n  const [stats,setStats]=useState({total:0,active:0,endingSoon:0});\r\n  const [openDetails, setOpenDetails] = useState(false);\r\n  const [selected, setSelected] = useState<Employee | null>(null);\r\n  useEffect(()=>{ (async ()=>{ const data = USE_FS ? await getAllTemporaryEmployeesFS() : TemporaryEmployeeService.getAll(); setEmployees(data); setStats({ total:data.length, active:data.filter(e=>e.status==='Active').length, endingSoon:data.filter(e=> { const d=new Date(e.contract.endDate).getTime()-Date.now(); const days=Math.floor(d/(1000*60*60*24)); return days<=30 && days>=0; }).length }); })(); },[]);\r\n  return <div className=\"p-6 space-y-6\">\r\n    <div><h1 className=\"text-2xl font-semibold\">Temporary Employees</h1><p className=\"text-xs text-gray-500\">Contract / daily wage manpower</p></div>\r\n    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n      <Card className=\"p-4\"><div className=\"flex justify-between\"><div><p className=\"text-xs text-gray-500\">Total</p><p className=\"text-xl font-bold\">{stats.total}</p></div><Users className=\"w-6 h-6 text-purple-600\"/></div></Card>\r\n      <Card className=\"p-4\"><div className=\"flex justify-between\"><div><p className=\"text-xs text-gray-500\">Active</p><p className=\"text-xl font-bold\">{stats.active}</p></div><Users className=\"w-6 h-6 text-green-600\"/></div></Card>\r\n      <Card className=\"p-4\"><div className=\"flex justify-between\"><div><p className=\"text-xs text-gray-500\">Ending â‰¤30d</p><p className=\"text-xl font-bold\">{stats.endingSoon}</p></div><FileWarning className=\"w-6 h-6 text-amber-600\"/></div></Card>\r\n    </div>\r\n    <div className=\"overflow-x-auto border rounded bg-white\">\r\n      <table className=\"min-w-full text-sm\">\r\n        <thead className=\"bg-gray-50\"><tr><th className=\"px-3 py-2 text-left\">Code</th><th className=\"px-3 py-2 text-left\">Name</th><th className=\"px-3 py-2 text-left\">Qatar ID</th><th className=\"px-3 py-2 text-left\">Client</th><th className=\"px-3 py-2 text-left\">Position</th><th className=\"px-3 py-2 text-left\">Contract End</th><th className=\"px-3 py-2 text-right\">Rate</th><th className=\"px-3 py-2 text-left\">Status</th></tr></thead>\r\n        <tbody>\r\n          {employees.map(e=> { const endDays=Math.floor((new Date(e.contract.endDate).getTime()-Date.now())/(1000*60*60*24)); return <tr key={e.id} className=\"border-b last:border-0\">\r\n            <td className=\"px-3 py-2\">{e.employeeCode}</td>\r\n            <td className=\"px-3 py-2 whitespace-nowrap\">\r\n              <button className=\"text-indigo-600 hover:underline font-medium\" onClick={()=> { setSelected(e as Employee); setOpenDetails(true); }}>\r\n                {e.personalInfo.firstName} {e.personalInfo.lastName}\r\n              </button>\r\n            </td>\r\n            <td className=\"px-3 py-2\">{e.documents.qatarId?.number ?? '-'}</td>\r\n            <td className=\"px-3 py-2\">{e.contract.client}</td>\r\n            <td className=\"px-3 py-2\">{e.contract.position}</td>\r\n            <td className=\"px-3 py-2\"><Badge variant={endDays<0? 'destructive': endDays<30? 'outline': 'secondary'}>{endDays<0? 'ENDED': endDays+'d'}</Badge></td>\r\n            <td className=\"px-3 py-2 text-right\">{e.compensation.rate}/{e.compensation.rateType}</td>\r\n            <td className=\"px-3 py-2\"><Badge variant={e.status==='Active'? 'secondary':'outline'}>{e.status}</Badge></td>\r\n          </tr>; })}\r\n          {employees.length===0 && <tr><td colSpan={8} className=\"px-3 py-6 text-center text-gray-500\">No records.</td></tr>}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    <Dialog open={openDetails} onClose={()=> setOpenDetails(false)} title={selected ? `${selected.personalInfo.firstName} ${selected.personalInfo.lastName}` : 'Employee Details'} size=\"lg\">\r\n      {selected && (<EmployeeDetails employee={selected} />)}\r\n    </Dialog>\r\n  </div>;\r\n};\r\nexport default TemporaryEmployeeList;\r\n"],"names":["TemporaryEmployeeList","employees","setEmployees","useState","stats","setStats","openDetails","setOpenDetails","selected","setSelected","useEffect","data","getAllTemporaryEmployeesFS","e","d","days","jsxs","jsx","Card","Users","FileWarning","endDays","Badge","Dialog","EmployeeDetails"],"mappings":"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"}