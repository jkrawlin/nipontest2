import{j as e}from"./vendor-ds6wDdAD.js";import{r as l}from"./react-nPrKd0zk.js";import{b as y}from"./employees-DNNZe7Q5.js";import{C as c}from"./card-DuYZQIZY.js";import{B as x}from"./badge-D-J4CWRb.js";import{D as f}from"./dialog-BgdO2cAq.js";import{E as g}from"./EmployeeDetails-DI4P3ZIf.js";import{U as m}from"./index-sMHxiCIB.js";import{F as u}from"./file-warning-CXt4pixh.js";const A=()=>{const[i,p]=l.useState([]),[n,h]=l.useState({total:0,active:0,endingSoon:0}),[j,o]=l.useState(!1),[a,N]=l.useState(null);return l.useEffect(()=>{(async()=>{const s=await y();p(s),h({total:s.length,active:s.filter(t=>t.status==="Active").length,endingSoon:s.filter(t=>{const r=new Date(t.contract.endDate).getTime()-Date.now(),d=Math.floor(r/(1e3*60*60*24));return d<=30&&d>=0}).length})})()},[]),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Temporary Employees"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Contract / daily wage manpower"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total"}),e.jsx("p",{className:"text-xl font-bold",children:n.total})]}),e.jsx(m,{className:"w-6 h-6 text-purple-600"})]})}),e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Active"}),e.jsx("p",{className:"text-xl font-bold",children:n.active})]}),e.jsx(m,{className:"w-6 h-6 text-green-600"})]})}),e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Ending â‰¤30d"}),e.jsx("p",{className:"text-xl font-bold",children:n.endingSoon})]}),e.jsx(u,{className:"w-6 h-6 text-amber-600"})]})})]}),e.jsx("div",{className:"overflow-x-auto border rounded bg-white",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Code"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Qatar ID"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Client"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Position"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Contract End"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),e.jsxs("tbody",{children:[i.map(s=>{var r;const t=Math.floor((new Date(s.contract.endDate).getTime()-Date.now())/864e5);return e.jsxs("tr",{className:"border-b last:border-0",children:[e.jsx("td",{className:"px-3 py-2",children:s.employeeCode}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsxs("button",{className:"text-indigo-600 hover:underline font-medium",onClick:()=>{N(s),o(!0)},children:[s.personalInfo.firstName," ",s.personalInfo.lastName]})}),e.jsx("td",{className:"px-3 py-2",children:((r=s.documents.qatarId)==null?void 0:r.number)??"-"}),e.jsx("td",{className:"px-3 py-2",children:s.contract.client}),e.jsx("td",{className:"px-3 py-2",children:s.contract.position}),e.jsx("td",{className:"px-3 py-2",children:e.jsx(x,{variant:t<0?"destructive":t<30?"outline":"secondary",children:t<0?"ENDED":t+"d"})}),e.jsxs("td",{className:"px-3 py-2 text-right",children:[s.compensation.rate,"/",s.compensation.rateType]}),e.jsx("td",{className:"px-3 py-2",children:e.jsx(x,{variant:s.status==="Active"?"secondary":"outline",children:s.status})})]},s.id)}),i.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-3 py-6 text-center text-gray-500",children:"No records."})})]})]})}),e.jsx(f,{open:j,onClose:()=>o(!1),title:a?`${a.personalInfo.firstName} ${a.personalInfo.lastName}`:"Employee Details",size:"lg",children:a&&e.jsx(g,{employee:a})})]})};export{A as TemporaryEmployeeList,A as default};
//# sourceMappingURL=TemporaryEmployeeList-CbNOW8CA.js.map
