{"version":3,"file":"CustomerContracts-CTFYwRoD.js","sources":["../../src/pages/customers/CustomerContracts.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { CustomerService } from '../../services/api/customers';\r\nimport type { Customer } from '../../types/customer';\r\nimport { Badge } from '../../components/ui/badge';\r\n\r\nexport const CustomerContracts: React.FC = () => {\r\n  const [customers, setCustomers] = useState<Customer[]>([]);\r\n  const [expiring, setExpiring] = useState<Customer[]>([]);\r\n\r\n  useEffect(()=> {\r\n    const all = CustomerService.getAll();\r\n    setCustomers(all);\r\n    setExpiring(CustomerService.getExpiringContracts(90));\r\n  }, []);\r\n\r\n  const contractStatusBadge = (c: Customer) => {\r\n    if (c.contract.status !== 'Active') return <Badge variant=\"destructive\">{c.contract.status}</Badge>;\r\n    if (!c.contract.endDate) return <Badge variant=\"success\">Active</Badge>;\r\n    const days = Math.ceil((new Date(c.contract.endDate).getTime() - Date.now())/86400000);\r\n    if (days < 0) return <Badge variant=\"destructive\">Expired</Badge>;\r\n    if (days <= 30) return <Badge variant=\"warning\">{days}d</Badge>;\r\n    if (days <= 60) return <Badge variant=\"outline\">{days}d</Badge>;\r\n    return <Badge variant=\"success\">Active</Badge>;\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <div>\r\n        <h1 className=\"text-2xl font-semibold\">Contracts</h1>\r\n        <p className=\"text-sm text-gray-600\">Contract status and expiries (next 90 days)</p>\r\n      </div>\r\n      <div className=\"overflow-x-auto border rounded\">\r\n        <table className=\"min-w-full text-sm\">\r\n          <thead className=\"bg-gray-50 text-xs uppercase text-gray-500\"><tr><th className=\"text-left px-3 py-2\">Customer</th><th className=\"text-left px-3 py-2\">Contract #</th><th className=\"text-left px-3 py-2\">Type</th><th className=\"text-left px-3 py-2\">End Date</th><th className=\"text-left px-3 py-2\">Status</th></tr></thead>\r\n          <tbody>\r\n            {customers.map(c => (\r\n              <tr key={c.id} className=\"border-t hover:bg-gray-50\">\r\n                <td className=\"px-3 py-2 font-medium\">{c.companyInfo.name}</td>\r\n                <td className=\"px-3 py-2 text-xs\">{c.contract.contractNumber}</td>\r\n                <td className=\"px-3 py-2 text-xs\">{c.contract.type}</td>\r\n                <td className=\"px-3 py-2 text-xs\">{c.contract.endDate ? new Date(c.contract.endDate).toLocaleDateString() : '-'}</td>\r\n                <td className=\"px-3 py-2\">{contractStatusBadge(c)}</td>\r\n              </tr>\r\n            ))}\r\n            {customers.length===0 && <tr><td colSpan={5} className=\"px-3 py-6 text-center text-xs text-gray-500\">No contracts.</td></tr>}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CustomerContracts;\r\n"],"names":["CustomerContracts","customers","setCustomers","useState","expiring","setExpiring","useEffect","all","CustomerService","contractStatusBadge","c","jsx","Badge","days","jsxs"],"mappings":"iMAKO,MAAMA,EAA8B,IAAM,CAC/C,KAAM,CAACC,EAAWC,CAAY,EAAIC,EAAAA,SAAqB,CAAA,CAAE,EACnD,CAACC,EAAUC,CAAW,EAAIF,EAAAA,SAAqB,CAAA,CAAE,EAEvDG,EAAAA,UAAU,IAAK,CACb,MAAMC,EAAMC,EAAgB,OAAA,EAC5BN,EAAaK,CAAG,EAChBF,EAAYG,EAAgB,qBAAqB,EAAE,CAAC,CACtD,EAAG,CAAA,CAAE,EAEL,MAAMC,EAAuBC,GAAgB,CAC3C,GAAIA,EAAE,SAAS,SAAW,SAAU,OAAOC,EAAAA,IAACC,EAAA,CAAM,QAAQ,cAAe,SAAAF,EAAE,SAAS,MAAA,CAAO,EAC3F,GAAI,CAACA,EAAE,SAAS,eAAgBC,EAAAA,IAACC,EAAA,CAAM,QAAQ,UAAU,SAAA,QAAA,CAAM,EAC/D,MAAMC,EAAO,KAAK,MAAM,IAAI,KAAKH,EAAE,SAAS,OAAO,EAAE,QAAA,EAAY,KAAK,IAAA,GAAO,KAAQ,EACrF,OAAIG,EAAO,QAAWD,EAAA,CAAM,QAAQ,cAAc,SAAA,UAAO,EACrDC,GAAQ,GAAWC,EAAAA,KAACF,EAAA,CAAM,QAAQ,UAAW,SAAA,CAAAC,EAAK,GAAA,EAAC,EACnDA,GAAQ,GAAWC,EAAAA,KAACF,EAAA,CAAM,QAAQ,UAAW,SAAA,CAAAC,EAAK,GAAA,EAAC,EAChDF,EAAAA,IAACC,EAAA,CAAM,QAAQ,UAAU,SAAA,SAAM,CACxC,EAEA,OACEE,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAH,EAAAA,IAAC,KAAA,CAAG,UAAU,yBAAyB,SAAA,YAAS,EAChDA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,6CAAA,CAA2C,CAAA,EAClF,QACC,MAAA,CAAI,UAAU,iCACb,SAAAG,EAAAA,KAAC,QAAA,CAAM,UAAU,qBACf,SAAA,CAAAH,MAAC,QAAA,CAAM,UAAU,6CAA6C,SAAAG,EAAAA,KAAC,KAAA,CAAG,SAAA,CAAAH,EAAAA,IAAC,KAAA,CAAG,UAAU,sBAAsB,SAAA,WAAQ,EAAKA,EAAAA,IAAC,KAAA,CAAG,UAAU,sBAAsB,SAAA,aAAU,EAAKA,EAAAA,IAAC,KAAA,CAAG,UAAU,sBAAsB,SAAA,OAAI,EAAKA,EAAAA,IAAC,KAAA,CAAG,UAAU,sBAAsB,SAAA,WAAQ,EAAKA,EAAAA,IAAC,KAAA,CAAG,UAAU,sBAAsB,SAAA,QAAA,CAAM,CAAA,CAAA,CAAK,CAAA,CAAK,SACvT,QAAA,CACE,SAAA,CAAAV,EAAU,IAAIS,GACbI,EAAAA,KAAC,KAAA,CAAc,UAAU,4BACvB,SAAA,CAAAH,MAAC,KAAA,CAAG,UAAU,wBAAyB,SAAAD,EAAE,YAAY,KAAK,QACzD,KAAA,CAAG,UAAU,oBAAqB,SAAAA,EAAE,SAAS,eAAe,QAC5D,KAAA,CAAG,UAAU,oBAAqB,SAAAA,EAAE,SAAS,KAAK,EACnDC,EAAAA,IAAC,KAAA,CAAG,UAAU,oBAAqB,WAAE,SAAS,QAAU,IAAI,KAAKD,EAAE,SAAS,OAAO,EAAE,mBAAA,EAAuB,IAAI,QAC/G,KAAA,CAAG,UAAU,YAAa,SAAAD,EAAoBC,CAAC,CAAA,CAAE,CAAA,GAL3CA,EAAE,EAMX,CACD,EACAT,EAAU,SAAS,GAAKU,EAAAA,IAAC,KAAA,CAAG,SAAAA,EAAAA,IAAC,KAAA,CAAG,QAAS,EAAG,UAAU,8CAA8C,SAAA,eAAA,CAAa,CAAA,CAAK,CAAA,CAAA,CACzH,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,CAEJ"}