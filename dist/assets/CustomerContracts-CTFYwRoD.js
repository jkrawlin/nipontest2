import{j as t}from"./vendor-ds6wDdAD.js";import{r as a}from"./react-nPrKd0zk.js";import{C as c}from"./customers-qEHjyBNn.js";import{B as s}from"./badge-D-J4CWRb.js";import"./index-sMHxiCIB.js";const j=()=>{const[n,x]=a.useState([]),[d,i]=a.useState([]);a.useEffect(()=>{const e=c.getAll();x(e),i(c.getExpiringContracts(90))},[]);const l=e=>{if(e.contract.status!=="Active")return t.jsx(s,{variant:"destructive",children:e.contract.status});if(!e.contract.endDate)return t.jsx(s,{variant:"success",children:"Active"});const r=Math.ceil((new Date(e.contract.endDate).getTime()-Date.now())/864e5);return r<0?t.jsx(s,{variant:"destructive",children:"Expired"}):r<=30?t.jsxs(s,{variant:"warning",children:[r,"d"]}):r<=60?t.jsxs(s,{variant:"outline",children:[r,"d"]}):t.jsx(s,{variant:"success",children:"Active"})};return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold",children:"Contracts"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Contract status and expiries (next 90 days)"})]}),t.jsx("div",{className:"overflow-x-auto border rounded",children:t.jsxs("table",{className:"min-w-full text-sm",children:[t.jsx("thead",{className:"bg-gray-50 text-xs uppercase text-gray-500",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-3 py-2",children:"Customer"}),t.jsx("th",{className:"text-left px-3 py-2",children:"Contract #"}),t.jsx("th",{className:"text-left px-3 py-2",children:"Type"}),t.jsx("th",{className:"text-left px-3 py-2",children:"End Date"}),t.jsx("th",{className:"text-left px-3 py-2",children:"Status"})]})}),t.jsxs("tbody",{children:[n.map(e=>t.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[t.jsx("td",{className:"px-3 py-2 font-medium",children:e.companyInfo.name}),t.jsx("td",{className:"px-3 py-2 text-xs",children:e.contract.contractNumber}),t.jsx("td",{className:"px-3 py-2 text-xs",children:e.contract.type}),t.jsx("td",{className:"px-3 py-2 text-xs",children:e.contract.endDate?new Date(e.contract.endDate).toLocaleDateString():"-"}),t.jsx("td",{className:"px-3 py-2",children:l(e)})]},e.id)),n.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-3 py-6 text-center text-xs text-gray-500",children:"No contracts."})})]})]})})]})};export{j as CustomerContracts,j as default};
//# sourceMappingURL=CustomerContracts-CTFYwRoD.js.map
