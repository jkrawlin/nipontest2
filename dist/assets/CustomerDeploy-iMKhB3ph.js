import{j as e}from"./vendor-ds6wDdAD.js";import{r as o}from"./react-nPrKd0zk.js";import{C as h}from"./customers-qEHjyBNn.js";import{u as S}from"./useEmployees-Vmvodcho.js";import{h as E,a as C,B as u}from"./index-sMHxiCIB.js";import{C as D}from"./card-DuYZQIZY.js";import"./employees-D2MDJNGt.js";import"./employees-DNNZe7Q5.js";const z=()=>{var y;const{id:c}=E(),r=C(),[l,f]=o.useState(null),d=((y=S({pageSize:1e3}).data)==null?void 0:y.employees)||[],[i,j]=o.useState([]),[n,N]=o.useState(""),[p,m]=o.useState(!1);if(o.useEffect(()=>{if(c){const s=h.getById(c);f(s||null)}},[c]),!l)return e.jsx("div",{className:"p-6 text-sm",children:"Loading..."});const g=s=>{j(t=>t.includes(s)?t.filter(a=>a!==s):[...t,s])},v=()=>{n&&(m(!0),i.forEach(s=>{const t=d.find(a=>a.id===s);if(t){const a=`${t.personalInfo.firstName} ${t.personalInfo.lastName}`,b=t.employeeType==="Permanent"?t.employment.position:t.contract.position;h.deployEmployee(l.id,{employeeId:t.id,employeeName:a,position:n||b,startDate:new Date().toISOString(),status:"Active"})}}),m(!1),r(`/customers/${l.id}`))},x=d.filter(s=>!l.deployment.currentEmployees.some(t=>t.employeeId===s.id&&t.status==="Active"));return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Deploy Staff"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Assign employees to ",l.companyInfo.name]})]}),e.jsx(u,{variant:"outline",onClick:()=>r(-1),children:"Back"})]}),e.jsxs(D,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] uppercase mb-1",children:"Deployment Position"}),e.jsx("input",{className:"w-full border rounded px-2 py-1",value:n,onChange:s=>N(s.target.value),placeholder:"e.g. Technician"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] uppercase mb-1",children:"Selected"}),e.jsxs("div",{className:"text-sm font-medium",children:[i.length," employees"]})]}),e.jsx("div",{className:"md:col-span-2 flex justify-end",children:e.jsx(u,{disabled:p||i.length===0||!n,onClick:v,children:p?"Deploying...":"Deploy Selected"})})]}),e.jsx("div",{className:"border rounded overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-3 py-2",children:"Select"}),e.jsx("th",{className:"text-left px-3 py-2",children:"Employee"}),e.jsx("th",{className:"text-left px-3 py-2",children:"Type"}),e.jsx("th",{className:"text-left px-3 py-2",children:"Position"})]})}),e.jsxs("tbody",{children:[x.map(s=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"checkbox",checked:i.includes(s.id),onChange:()=>g(s.id)})}),e.jsxs("td",{className:"px-3 py-2 font-medium",children:[s.personalInfo.firstName," ",s.personalInfo.lastName]}),e.jsx("td",{className:"px-3 py-2 text-xs",children:s.employeeType}),e.jsx("td",{className:"px-3 py-2 text-xs",children:s.employeeType==="Permanent"?s.employment.position:s.contract.position})]},s.id)),x.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-3 py-4 text-center text-xs text-gray-500",children:"No available employees"})})]})]})})]})]})};export{z as CustomerDeploy,z as default};
//# sourceMappingURL=CustomerDeploy-iMKhB3ph.js.map
